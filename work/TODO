[√]  seafes不依赖seafile， 直接读seafile.conf文件，然后直接读数据库的数据.




[√] alphabox里面事件统计。
[√] alphabox下ali_mq测试(说下周测试)

[√] aplhabox下office文件事件统计
    [√] seafevnt写成api让seahub调用(查看一个文件的历史的时候，如果这个文件是doc类型，则调用seafevents的接口，显示记录在seafevents中的记录)
    [√] 添加一个文件夹需要遍历里面的文件。然后添加对应记录
    [√] 客户端在将一个目录（目录中有文件夹） 移到另外个文件夹中的时候，会在mv_dirs里记录
    [√] 删掉文件或者文件以后，删除对应里面所有的存在seafevnt数据库的记录, 恢复的时候(就是add操作)， 正常操作。
    [√] 不能只依靠obj_id来判断，因为同一资料库下一样名次一样内容的东西，obj_id之一样的。有问题！
    [√] 文件类型改成可配置


    [√] 现在的查找一条链改为直接select查找关于某个资料库某个路径文件的记录
    [√] 数据库添加字段 cretora_name

    [√] 脚本-自动将之前的记录保存到数据库
    [√] 更新文档，seahub改动，以及索引的添加


restore只负责找当前资料库之前的commit并记录，无法恢复中间的。

Q:
    获得所有的commit，获得所有的commit的diff产生的文件,如果现在还是可以找到这个文件，或者文件夹，记录到数据库。



[√] 自己共享给群组read-only，如果自己是群组一员，看到的是admin的权限(有共享等操作)。
[√] 删除文件夹和文件下 preview权限的copy, download, share操作.

得到一个资料库路径下的所有文件和文件夹，会优先根据用户权限，然后才是组权限。




用户只读: r，无
群组只读: r, 无
用户预览: r, 有
群组预览: r, 有

在多种权限情况下，优先考虑用户权限，如果没有设置才考虑组权限。
但是现在无法区分分享给一个用户只读权限分享给用户所在群组预览权限和只分享给用户所在群组预览权限。


solution:

当分享给用户的时候不论是否为admin或者preview，都在数据库额外创建一条permission为空记录。
判断权限的时候，先判断用户自己的表中是否存在记录，如果没有则去看用户所在的群组的最大的权限的记录。



